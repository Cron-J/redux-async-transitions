# ovverride test code

dependencies:
    pre:
        - echo -e "$NPM_USERNAME\n$NPM_PASSWORD\n$NPM_EMAIL" | npm login

test:
    override:
        - npm run test
        - npm run test-coverage
    post:
        - sudo mkdir $CIRCLE_TEST_REPORTS/junit
        - sudo cp test-results.xml $CIRCLE_TEST_REPORTS/junit
        - npm run upload-coverage

deployment:
    npm:
        branch: master
        commands:
            - npm run tag
            - git push --tags
            - npm publish
